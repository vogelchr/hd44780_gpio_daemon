#include "hd44780_font.h"
#include "hd44780.h"


static const char
cgram_windmill[HD44780_FONT_WINDMILL_NCHARS][HD44780_FONT_NBYTES] =
{[0]={	0x01,  /* . . . . *  0 */
	0x02,  /* . . . * . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x08,  /* . * . . . */
	0x10,  /* * . . . . */
	0x00
}, [1]={
	0x00,  /* . . . . .  1 */
	0x01,  /* . . . . * */
	0x02,  /* . . . * . */
	0x04,  /* . . * . . */
	0x08,  /* . * . . . */
	0x10,  /* * . . . . */
	0x00,  /* . . . . . */
	0x00
}, [2]={
	0x00,  /* . . . . .  2 */
	0x00,  /* . . . . . */
	0x03,  /* . . . * * */
	0x04,  /* . . * . . */
	0x18,  /* * * . . . */
	0x00,  /* . . . . . */
	0x00,  /* . . . . . */
	0x00
}, [3]={
	0x00,  /* . . . . .  3 */
	0x00,  /* . . . . . */
	0x00,  /* . . . . . */
	0x1f,  /* * * * * * */
	0x00,  /* . . . . . */
	0x00,  /* . . . . . */
	0x00,  /* . . . . . */
	0x00
}, [4]={
	0x00,  /* . . . . .  4 */
	0x00,  /* . . . . . */
	0x18,  /* * * . . . */
	0x04,  /* . . * . . */
	0x03,  /* . . . * * */
	0x00,  /* . . . . . */
	0x00,  /* . . . . . */
	0x00
}, [5]={
	0x00,  /* . . . . .  5 */
	0x10,  /* * . . . . */
	0x08,  /* . * . . . */
	0x04,  /* . . * . . */
	0x02,  /* . . . * . */
	0x01,  /* . . . . * */
	0x00,  /* . . . . . */
	0x00
}, [6]={
	0x10,  /* * . . . .  6 */
	0x08,  /* . * . . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x02,  /* . . . * . */
	0x01,  /* . . . . * */
	0x00
}, [7]={
	0x08,  /* . * . . . 7 */
	0x08,  /* . * . . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x02,  /* . . . * . */
	0x02,  /* . . . * . */
	0x00
}, [8]={
	0x04,  /* . . * . . 8 */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x04,  /* . . * . . */
	0x00
}};

void
hd44780_font_setchar(char c, const char *font) {
	if (c>7)
		return;
	hd44780_write_byte(HD44780_CGADDR(HD44780_FONT_NBYTES*c), HD44780_CMD);
	hd44780_write_buf(font, 8);
}

void
hd44780_font_set_windmill_phase(unsigned i) {
	if (i>=HD44780_FONT_WINDMILL_NCHARS)
		i=0;
	hd44780_font_setchar(HD44780_FONT_WINDMILL,cgram_windmill[i]);
}

void
hd44780_font_windmill_advance(unsigned *i) {
	(*i)++;
	if ( (*i) >= HD44780_FONT_WINDMILL_NCHARS)
		(*i) = 0;
	hd44780_font_set_windmill_phase(*i);
}